---
title: SQL å­¸ç¿’ç¬¬ä¸ƒæ­¥ æ™‚é–“å€é–“ç¯©é¸æŠ€å·§ï¼šè®“æŸ¥è©¢æ›´ç²¾æº–èˆ‡é«˜æ•ˆ
tags:
  - SQL
  - æ–°æ‰‹
  - SQL ç³»åˆ—ä¸€
series:
  - SQLåˆå­¸
seriesorder: 7
---
å¸¸è¦‹çš„æ™‚é–“ç¯„åœæŸ¥è©¢å ´æ™¯
æŒ‰æ—¥æœŸå€é–“ç¯©é¸
ä¾‹å¦‚æŸ¥è©¢ 2023/01/01 åˆ° 2023/03/31 çš„è¨‚å–®è³‡æ–™ã€‚

æŒ‰æ™‚é–“æ®µç¯©é¸
ä¾‹å¦‚æ¯å¤© 18:00 - 23:00 çš„æµé‡ã€‚

æŒ‰ç›¸å°æ™‚é–“ç¯©é¸
ä¾‹å¦‚ã€Œæœ€è¿‘ 7 å¤©ã€ã€ã€Œä»Šå¹´è‡³ä»Š (YTD)ã€ã€‚

## ðŸ” åŸºæœ¬ç¯„åœæŸ¥è©¢
å‡è¨­ orders è¡¨çµæ§‹å¦‚ä¸‹ï¼š

``` sql
order_id   INT
order_date DATETIME
amount     DECIMA
```
### 1ï¸âƒ£ å›ºå®šæ—¥æœŸå€é–“

```sql
SELECT *
FROM orders
WHERE order_date >= '2023-01-01'
  AND order_date < '2023-04-01';
```
ðŸ“Œ ç‚ºä»€éº¼ä¸ç”¨ <= '2023-03-31'ï¼Ÿ
å› ç‚º DATETIME å¯èƒ½åŒ…å«æ™‚åˆ†ç§’ï¼Œå¦‚æžœä½ åªç”¨ <=ï¼ŒæœƒéŒ¯éŽ 3/31 ç•¶å¤© 23:59:59 ä¹‹å¾Œçš„è³‡æ–™ã€‚
æœ€ä½³åšæ³•æ˜¯ã€Œç”¨ < ä¸‹ä¸€å¤©çš„ 00:00:00ã€ã€‚

### 2ï¸âƒ£ ä½¿ç”¨ BETWEENï¼ˆéœ€å°å¿ƒç²¾ç¢ºåº¦ï¼‰

```sql
SELECT *
FROM orders
WHERE order_date BETWEEN '2023-01-01' AND '2023-03-31 23:59:59';
```
ðŸ“Œ BETWEEN åŒ…å«é ­å°¾å…©ç«¯ï¼Œé©åˆç”¨åœ¨å·²çŸ¥å®Œæ•´æ™‚é–“ç¯„åœçš„æƒ…æ³ã€‚

### â³ æŒ‰æ™‚é–“æ®µç¯©é¸
å¦‚æžœåªæƒ³æŸ¥è©¢ã€Œæ¯å¤©çš„æŸå€‹æ™‚æ®µã€ï¼š

```sql
SELECT *
FROM orders
WHERE HOUR(order_date) BETWEEN 18 AND 23;
```
ðŸ“Œ æ•ˆèƒ½è­¦å‘Šï¼š
HOUR(order_date) æœƒè®“ç´¢å¼•å¤±æ•ˆï¼Œæœ€å¥½å…ˆå»ºç«‹ä¸€å€‹ã€Œå°æ™‚æ¬„ä½ã€æˆ–ç”¨è³‡æ–™åº«çš„ç”Ÿæˆæ¬„ä½ï¼ˆGenerated Columnï¼‰ã€‚

## ðŸ“… ç›¸å°æ™‚é–“ç¯©é¸
### 1ï¸âƒ£ æœ€è¿‘ 7 å¤©ï¼ˆMySQLï¼‰

```sql
SELECT *
FROM orders
WHERE order_date >= NOW() - INTERVAL 7 DAY;
```
### 2ï¸âƒ£ ä»Šå¹´è‡³ä»Šï¼ˆPostgreSQLï¼‰

```sql
SELECT *
FROM orders
WHERE order_date >= DATE_TRUNC('year', CURRENT_DATE);
```
### 3ï¸âƒ£ ä¸Šå€‹æœˆè³‡æ–™ï¼ˆMySQLï¼‰

```sql
SELECT *
FROM orders
WHERE order_date >= DATE_FORMAT(CURDATE() - INTERVAL 1 MONTH, '%Y-%m-01')
  AND order_date < DATE_FORMAT(CURDATE(), '%Y-%m-01');
```
ðŸ›  æ•ˆèƒ½æœ€ä½³åŒ–æŠ€å·§
é¿å…åœ¨ WHERE ç›´æŽ¥å°æ¬„ä½å¥—ç”¨å‡½æ•¸ï¼ˆå¦‚ YEAR(order_date) = 2023ï¼‰ï¼Œæ”¹ç”¨ç¯„åœæ¯”è¼ƒã€‚

ç‚ºæ™‚é–“æ¬„ä½å»ºç«‹ç´¢å¼•ï¼ˆINDEXï¼‰ã€‚

å¤§æ‰¹é‡æŸ¥è©¢æ™‚ï¼Œå¯åˆ†æ‰¹è™•ç†ï¼ˆBatch Queryï¼‰ã€‚

ðŸ“Œ å°çµ
å›ºå®šæ™‚é–“ç¯„åœ â†’ ç”¨ >= èˆ‡ < æ­é…ã€‚

ç›¸å°æ™‚é–“ â†’ å–„ç”¨ NOW()ã€CURRENT_DATEã€DATE_TRUNCã€‚

é¿å…å‡½æ•¸åœ¨æ¢ä»¶ä¸­ç›´æŽ¥ä½œç”¨ï¼Œä¿ç•™ç´¢å¼•æ•ˆèƒ½ã€‚

ðŸ“Œ å¦‚æžœä½ å–œæ­¡é€™ç³»åˆ—ï¼Œæ­¡è¿Žç•™è¨€ä½ æƒ³å­¸çš„å…§å®¹ã€æ”¶è—é€™ç¯‡æ–‡ç« ï¼Œæˆ–è¿½è¹¤æˆ‘è®“ä½ æŒçºŒç²å¾— SQL ç³»åˆ—æ›´æ–°ï¼